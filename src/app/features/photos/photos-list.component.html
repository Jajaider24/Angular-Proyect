<div class="form-container">
  <app-list-header
    [title]="'Fotos'"
    [subtitle]="'Evidencias y fotos'"
    [lucide]="'Camera'"
    [breadcrumb]="[
      { label: 'Dashboard', link: ['/dashboard'] },
      { label: 'Fotos' }
    ]"
    [actionText]="'Subir foto'"
    [actionLink]="['/photos/new']"
    [actionLucide]="'Upload'"
  ></app-list-header>

  <div class="row g-3">
    <div class="col-sm-6 col-md-4 col-lg-3" *ngFor="let p of photos">
      <a
        class="card h-100 text-decoration-none"
        [routerLink]="['/photos', p.id]"
      >
        <!-- Prefer streaming by id; fallback to uploads path from image_url -->
        <img
          class="card-img-top"
          [src]="
            p.id ? '/photos/' + p.id : p.image_url ? '/' + p.image_url : ''
          "
          alt="Foto"
        />
        <div class="card-body">
          <p class="card-text">{{ p.caption || "Foto #" + p.id }}</p>
        </div>
      </a>
    </div>
  </div>
</div>
